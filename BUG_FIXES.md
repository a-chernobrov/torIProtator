# Исправления ошибок после оптимизации

## Проблема
После оптимизации CPU в `manager.py` веб-интерфейс перестал отображать узлы Tor сети.

## Найденные ошибки и исправления

### 1. Критическая ошибка в `circuit_change_loop()`
**Проблема:** При первом запуске для каждого контейнера устанавливалось время последней смены цепочки и сразу выполнялся `continue`, что означало, что цепочки никогда не создавались изначально.

**Исправление:** Добавлена логика инициализации цепочки при первом запуске:
```python
if name not in last_change_times:
    # При первом запуске сразу создаем цепочку
    logger.info(f"Инициализация цепочки для {name}")
    ensure_exit_country(container)
    last_change_times[name] = current_time
    continue
```

### 2. Отсутствующий sleep в `monitor_circuits_and_ips()`
**Проблема:** В функции мониторинга отсутствовал `time.sleep()` в конце цикла, что могло привести к чрезмерной нагрузке на CPU.

**Исправление:** Добавлен `time.sleep(60)` в конце цикла мониторинга.

## Результат
Теперь:
- Цепочки Tor будут создаваться сразу при запуске контейнеров
- Узлы будут корректно отображаться в веб-интерфейсе
- Сохранена оптимизация CPU без потери функциональности
- Мониторинг работает с правильными интервалами

## Рекомендации
1. Перезапустите контейнеры после применения исправлений
2. Проверьте логи на наличие сообщений "Инициализация цепочки для..."
3. Убедитесь, что узлы отображаются в веб-интерфейсе через 1-2 минуты после запуска